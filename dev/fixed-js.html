<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>Scrollama Demo: Fixed JS</title>
    <meta name="description" content="Scrollama Demo: Fixed JS" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- start css style code -->
    <style>
        * {
            box-sizing: border-box;
        }
        /*format story page*/
        html,
        body {
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
                Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif;
        }

        body {
            min-height: 1280px;
            font-weight: 300;
            color: #2a2a2a;
        }

        p,
        h1,
        h2,
        h3,
        h4,
        a {
            margin: 0;
            font-weight: 300;
        }
        /*style scrollama link*/
        a,
        a:visited,
        a:hover {
            color: #f30;
            text-decoration: none;
            border-bottom: 1px solid currentColor;
        }

        #intro {
            max-width: 40rem;
            margin: 1rem auto;
            text-align: center;
        }

        .intro__overline {
            font-size: 1.4rem;
        }

        .intro__hed {
            font-size: 1.4rem;
            margin: 1.5rem auto;
            font-weight: 900;
            letter-spacing: 0.05em;
        }

        .intro__dek {
            font-size: 1.4rem;
        }

        #intro {
            margin-bottom: 320px;
        }

        #outro {
            height: 1200px;
        }

        #scroll {
            position: relative;
            display: flex;
        }

        /*style text box on left*/
        figure {
            position: sticky;
            width: 100%;
            top: 0;
            background-color: #ddd;
            border: 1px solid #000;
            overflow: visible;
        }

        /*style image box on right*/
        .scrolly-img {
            width: 100%;
            height: 60vh;
            /* make images more consistent in size */
            object-fit: contain;
            object-position: center;
            display: block;
            /* fill in image gaps with borders */
            background: #000;
        }
        /*style image caption box on right*/
        #scrolly-caption-box {
            background: #fff;
            padding: 0.75rem 1rem;
            font-size: 0.9rem;
            line-height: 1.3rem;
            border-top: 1px solid #ccc;
        }

        #scrolly-caption-box a {
            display: block;
            font-weight: 600;
            margin-bottom: 0.25rem;
            color: #333;
            text-decoration: underline;
        }

        #scrolly-caption-box span {
            color: #555;
        }

        article {
            position: relative;
            padding: 0 1rem;
            width: 30rem;
        }

        
        .step {
            margin: 0 auto 2rem auto;
            border: 1px solid #333;
            position: relative;
        }

        .step:last-child {
            border-bottom: 1px solid #333;
        }

        /*style active box currently on to be different color*/
        .step.is-active {
            background-color: lightgrey;
        }

        .step p {
            text-align: left;
            padding: 1rem;
            font-size: 1.5rem;
        }
    </style>
</head>

<body>
    <section id="intro">
        <p class="intro__overline">
            <a href="https://github.com/russellsamora/scrollama">scrollama.js</a>
        </p>
        <!-- add hed and dek -->
        <h1 class="intro__hed">Super Bowl halftime performances through the years:</h1>
        <p class="intro__dek">
            Scroll to learn about the four most recent performances
        </p>
    </section>

    <section id="scroll">
        <article>
            <!-- create slots and text for four steps -->
            <div class="step" data-step="1">
                <p>Super Bowl LIX (2025): Kendrick Lamar featuring SZA</p>
            </div>
            <div class="step" data-step="2">
                <p>Super Bowl LVIII (2024): Usher</p>
            </div>
            <div class="step" data-step="3">
                <p>Super Bowl LVII (2023): Rihanna</p>
            </div>
            <div class="step" data-step="4">
                <p>Super Bowl LVI (2022): Dr. Dre and Snoop Dogg</p>
            </div>
        </article>

        <figure id="scrolly-figure">
            <img id="scrolly-image" src="" class="scrolly-img">

            <!-- create new container for caption box -->
            <div id="scrolly-caption-box">
                <a id="scrolly-link" href="" target="_blank"></a>
                <span id="scrolly-caption"></span>
            </div>

            <p>0</p>
        </figure>
    </section>

    <section id="outro"></section>

    <script src="d3.v4.min.js"></script>
    <script src="../build/scrollama.js"></script>

    <script>
        /* initialize variables */
        var container = d3.select("#scroll");
        var figure = container.select("figure");
        var article = container.select("article");
        var step = article.selectAll(".step");
        /* call function scrollama */
        var scroller = scrollama();

        /* fix height of step and figure elements */
        function handleResize() {
            var stepHeight = Math.floor(window.innerHeight * 0.75);
            step.style("height", stepHeight + "px");

            var figureHeight = Math.floor(window.innerHeight * 0.5);
            figure.style("height", figureHeight + "px");

            scroller.resize();
        }

        /* create array of media objects for each step's image */
        var media = [
            {
                img: "KendrickLamar.jpg",
                link: "https://commons.wikimedia.org/wiki/File:Pulitzer2018-portraits-kendrick-lamar.jpg",
                caption: "Image from Fuzheado, CC BY-SA 4.0 <https://creativecommons.org/licenses/by-sa/4.0>, via Wikimedia Commons"
            },
            {
                img: "Usher.jpg",
                link: "https://commons.wikimedia.org/wiki/File:Usher_Raymond_by_Sandra_Alphonse.jpg#file",
                caption: "Image from Sandra Alphonse, CC BY-SA 2.0 <https://creativecommons.org/licenses/by-sa/2.0>, via Wikimedia Commons"
            },
            {
                img: "Rihanna.png",
                link: "https://commons.wikimedia.org/wiki/File:Rihanna_Fenty_2018.png",
                caption: "Image from SIGMA, CC BY 3.0 <https://creativecommons.org/licenses/by/3.0>, via Wikimedia Commons"
            },
            {
                img: "SnoopDogg_and_DrDre.jpg",
                link: "https://commons.wikimedia.org/wiki/File:Snoop_Dogg_and_Dr._Dre.jpg",
                caption: "Image from Bruce Baker from Sydney, Australia, CC BY 2.0 <https://creativecommons.org/licenses/by/2.0>, via Wikimedia Commons"
            }
        ];

        /* define what happens when step is entered */
        function handleStepEnter(response) {
            step.classed("is-active", (d, i) => i === response.index);

            figure.select("p").text(response.index + 1);

            var item = media[response.index];

            d3.select("#scrolly-image").attr("src", item.img);
            d3.select("#scrolly-link").attr("href", item.link).text(item.link);
            d3.select("#scrolly-caption").text(item.caption);
        }

        /* create the scroller */
        function init() {
            handleResize();

            scroller
                .setup({
                    step: "article .step",
                    offset: 0.75
                })
                .onStepEnter(handleStepEnter);

            window.addEventListener("resize", handleResize);
        }

        init();
    </script>

</body>
</html>